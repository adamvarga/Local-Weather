var getIP="http://ip-api.com/json/",weatherIP="https://fcc-weather-api.glitch.me/api/current?lon=";!function(){function addIcon(desc){$("div."+desc).removeClass("hide")}$.getJSON(getIP).done(function(location){$(".weather-wrapper .local .city").text(" "+location.city);var getWeather=weatherIP+location.lon+"&lat="+location.lat;$.getJSON(getWeather,{tagmode:"any",format:"json"}).done(function(data){var temp,getDesc=data.weather[0].description,main=data.weather[0].main,sunriseDate=new Date(1e3*data.sys.sunrise).toLocaleTimeString().replace(/([\d]+:[\d]{2})(:[\d]{2})(.*)/,"$1$3"),sunsetDate=new Date(1e3*data.sys.sunset).toLocaleTimeString().replace(/([\d]+:[\d]{2})(:[\d]{2})(.*)/,"$1$3"),tempCelsius=Math.round(data.main.temp);!function(desc){switch(desc=desc.toLowerCase()){case"drizzle":case"clouds":case"rain":case"snow":case"clear":case"thunderstom":case"mist":addIcon(desc)}}(main),temp=tempCelsius,$(".switch-fahreinheit").click(function(){var temperature=$(this).children("#newTemp").text();if($("#temp").hasClass("C")){var cToFahr=9*temperature/5+32;$("#newTemp").html(cToFahr),$("#temp").attr("class","F"),$("#temp").html(" F")}else $("#newTemp").html(temp),$("#temp").attr("class","C"),$("#temp").html(" &deg;C")}),$(".description .desc").text(getDesc),$(".description .temp-box #newTemp").text(tempCelsius),$(".description .min-temp").text(Math.round(data.main.temp_min)),$(".description .max-temp").text(Math.round(data.main.temp_max)),$(".description .sunrise").text(sunriseDate),$(".description .sunset").text(sunsetDate)})}),setInterval(function(){$(".sunny-o").toggleClass("sunny-o-animation"),setTimeout(function(){$(".sunny-o").toggleClass("sunny-o-animation")},1e3)},3e3)}();